<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Delus Scottsdale - Premium Fashion & Electronic Music | Arizona Streetwear</title>
    <meta name="description" content="Delus Scottsdale - Premium streetwear and electronic music from Arizona. Shop exclusive trucker hats, clothing collections, and discover underground music culture in Scottsdale.">
    <meta name="keywords" content="Delus Scottsdale, Arizona streetwear, electronic music Scottsdale, premium fashion Arizona, trucker hats, underground music, fashion brand Scottsdale">
    <meta name="author" content="Delus Scottsdale">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://delus.co/">
    <meta property="og:title" content="Delus Scottsdale - Premium Fashion & Electronic Music">
    <meta property="og:description" content="Premium streetwear and electronic music from Scottsdale, Arizona. Shop exclusive collections and discover underground music culture.">
    <meta property="og:image" content="{{ url_for('static', filename='images/Delus_Scottsdale_Logo_No_Wave.png', _external=True) }}">
    <meta property="og:site_name" content="Delus Scottsdale">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://delus.co/">
    <meta property="twitter:title" content="Delus Scottsdale - Premium Fashion & Electronic Music">
    <meta property="twitter:description" content="Premium streetwear and electronic music from Scottsdale, Arizona. Shop exclusive collections and discover underground music culture.">
    <meta property="twitter:image" content="{{ url_for('static', filename='images/Delus_Scottsdale_Logo_No_Wave.png', _external=True) }}">
    
    <!-- Local Business Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ClothingStore",
      "name": "Delus Scottsdale",
      "description": "Premium streetwear and electronic music brand from Scottsdale, Arizona",
      "url": "https://delus.co",
      "logo": "{{ url_for('static', filename='images/Delus_Scottsdale_Logo_No_Wave.png', _external=True) }}",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "123 Delus Street",
        "addressLocality": "Scottsdale",
        "addressRegion": "Arizona",
        "postalCode": "85251",
        "addressCountry": "US"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "33.4942",
        "longitude": "-111.9261"
      },
      "telephone": "1-800-DELUS-HELP",
      "email": "support@delus.com",
      "sameAs": [
        "https://www.instagram.com/delus.co/"
      ],
      "openingHours": "Mo-Fr 09:00-18:00",
      "priceRange": "$40-$80",
      "paymentAccepted": "Credit Card, Debit Card, PayPal",
      "currenciesAccepted": "USD"
    }
    </script>
    
    <!-- Product Schema for Featured Items -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "Delus Scottsdale Featured Products",
      "description": "Premium trucker hats and streetwear from Delus Scottsdale",
      "itemListElement": [
        {
          "@type": "Product",
          "position": 1,
          "name": "Ritual Trucker Hat - Black XL",
          "description": "Essential Delus Scottsdale trucker hat in premium black",
          "brand": {
            "@type": "Brand",
            "name": "Delus Scottsdale"
          },
          "offers": {
            "@type": "Offer",
            "price": "60.00",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock",
            "seller": {
              "@type": "Organization",
              "name": "Delus Scottsdale"
            }
          }
        }
      ]
    }
    </script>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://delus.co/">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hero.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/music.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/record_label.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/carousel.css') }}">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=La+Belle+Aurore&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-animation"></div>
    <!-- Header/Navigation -->
    <header>
        <nav class="main-nav">
            <div class="logo">
                <a href="/" aria-label="Delus Scottsdale Homepage">
                    <img src="{{ url_for('static', filename='images/Delus_Scottsdale_Logo_No_Wave.png') }}" alt="Delus Scottsdale - Premium Fashion & Music" class="logo-image">
                </a>
            </div>
            
            <div class="nav-right">
                <a href="{{ url_for('cart') }}" class="cart-icon" aria-label="Shopping Cart">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-counter" class="badge">
                        {{ session.get('cart', [])|length }}
                    </span>
                </a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero main-hero">
        <div class="hero-content">
            <h1 class="sr-only">Delus Scottsdale - Premium Fashion and Electronic Music from Arizona</h1>
            <a href="#featured" class="cta-button" aria-label="Shop Delus Scottsdale Collection">Shop Now</a>
        </div>
    </section>

    <!-- Featured Collection -->
    <section id="featured" class="featured-collection">
        <h2 class="drop-title" data-text="DROP 001">DROP 001</h2>
        <p class="collection-description">Exclusive Delus Scottsdale premium streetwear collection featuring hand-crafted trucker hats and fashion-forward designs from Arizona.</p>
        <div class="collection-container">
            <!-- First row: Products 1-2 -->
            <div class="product-grid two-column">
                <!-- First Product -->
                <div class="product-card">
                    <div class="product-image-carousel">
                        <div class="carousel-container">
                            <button class="carousel-arrow carousel-prev">
                                <i class="fas fa-angle-left"></i>
                            </button>
                            <button class="carousel-arrow carousel-next">
                                <i class="fas fa-angle-right"></i>
                            </button>
                            <div class="carousel-slides">
                                <div class="carousel-slide active">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09089.jpg') }}" alt="Delus Trucker Hat - Front">
                                </div>
                                <!-- Additional product images -->
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09093.jpg') }}" alt="Delus Trucker Hat - Side">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09098.jpg') }}" alt="Delus Trucker Hat - Back">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09102.jpg') }}" alt="Delus Trucker Hat - Detail">
                                </div>
                            </div>
                            <div class="carousel-dots">
                                <span class="dot active" data-index="0"></span>
                                <span class="dot" data-index="1"></span>
                                <span class="dot" data-index="2"></span>
                                <span class="dot" data-index="3"></span>
                            </div>
                        </div>
                    </div>
                    <h3>Ritual Trucker - Black XL</h3>
                    <p class="price">$60</p>
                    {% if products and products|length > 0 and products[0].stock > 0 %}
                        <button class="add-to-cart" data-product-id="1">
                            Add to Cart
                        </button>
                    {% else %}
                        <button class="add-to-cart sold-out" disabled>
                            Sold Out
                        </button>
                    {% endif %}
                </div>
                
                <!-- Second Product -->
                <div class="product-card">
                    <div class="product-image-carousel">
                        <div class="carousel-container">
                            <button class="carousel-arrow carousel-prev">
                                <i class="fas fa-angle-left"></i>
                            </button>
                            <button class="carousel-arrow carousel-next">
                                <i class="fas fa-angle-right"></i>
                            </button>
                            <div class="carousel-slides">
                                <div class="carousel-slide active">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09203.JPG') }}" alt="Delus Trucker II - Front">
                                </div>
                                <!-- Additional product images -->
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09205.JPG') }}" alt="Delus Trucker II - Side">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09215.JPG') }}" alt="Delus Trucker II - Back">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09221.JPG') }}" alt="Delus Trucker II - Detail">
                                </div>
                            </div>
                            <div class="carousel-dots">
                                <span class="dot active" data-index="0"></span>
                                <span class="dot" data-index="1"></span>
                                <span class="dot" data-index="2"></span>
                                <span class="dot" data-index="3"></span>
                            </div>
                        </div>
                    </div>
                    <h3>Ritual Trucker - Grey XL</h3>
                    <p class="price">$60</p>
                    {% if products and products|length > 1 and products[1].stock > 0 %}
                        <button class="add-to-cart" data-product-id="2">
                            Add to Cart
                        </button>
                    {% else %}
                        <button class="add-to-cart sold-out" disabled>
                            Sold Out
                        </button>
                    {% endif %}
                </div>
            </div>
            
            <!-- Second row: Products 3-4 -->
            <div class="product-grid two-column">
                <!-- Third Product (placeholder) -->
                <div class="product-card">
                    <div class="product-image-carousel">
                        <div class="carousel-container">
                            <button class="carousel-arrow carousel-prev">
                                <i class="fas fa-angle-left"></i>
                            </button>
                            <button class="carousel-arrow carousel-next">
                                <i class="fas fa-angle-right"></i>
                            </button>
                            <div class="carousel-slides">
                                <div class="carousel-slide active">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09114.JPG') }}" alt="Product 3">
                                </div>
                                <!-- Additional product images -->
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09118.JPG') }}" alt="Product 3 - View 2">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09122.JPG') }}" alt="Product 3 - View 3">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09128.JPG') }}" alt="Product 3 - View 4">
                                </div>
                            </div>
                            <div class="carousel-dots">
                                <span class="dot active" data-index="0"></span>
                                <span class="dot" data-index="1"></span>
                                <span class="dot" data-index="2"></span>
                                <span class="dot" data-index="3"></span>
                            </div>
                        </div>
                    </div>
                    <h3>Ritual Trucker - Maroon</h3>
                    <p class="price">$60</p>
                    {% if products and products|length > 2 and products[2].stock > 0 %}
                        <button class="add-to-cart" data-product-id="3">
                            Add to Cart
                        </button>
                    {% else %}
                        <button class="add-to-cart sold-out" disabled>
                            Sold Out
                        </button>
                    {% endif %}
                </div>
                
                <!-- Fourth Product (placeholder) -->
                <div class="product-card">
                    <div class="product-image-carousel">
                        <div class="carousel-container">
                            <button class="carousel-arrow carousel-prev">
                                <i class="fas fa-angle-left"></i>
                            </button>
                            <button class="carousel-arrow carousel-next">
                                <i class="fas fa-angle-right"></i>
                            </button>
                            <div class="carousel-slides">
                                <div class="carousel-slide active">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09155.JPG') }}" alt="Product 4">
                                </div>
                                <!-- Additional product images -->
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09160.JPG') }}" alt="Product 4 - View 2">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09165.JPG') }}" alt="Product 4 - View 3">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09170.JPG') }}" alt="Product 4 - View 4">
                                </div>
                            </div>
                            <div class="carousel-dots">
                                <span class="dot active" data-index="0"></span>
                                <span class="dot" data-index="1"></span>
                                <span class="dot" data-index="2"></span>
                                <span class="dot" data-index="3"></span>
                            </div>
                        </div>
                    </div>
                    <h3>Certified Trucker - Rose</h3>
                    <p class="price">$60</p>
                    {% if products and products|length > 3 and products[3].stock > 0 %}
                        <button class="add-to-cart" data-product-id="4">
                            Add to Cart
                        </button>
                    {% else %}
                        <button class="add-to-cart sold-out" disabled>
                            Sold Out
                        </button>
                    {% endif %}
                </div>
            </div>
            
            <!-- Third row: Products 5-6 -->
            <div class="product-grid two-column">
                <!-- Fifth Product (placeholder) -->
                <div class="product-card">
                    <div class="product-image-carousel">
                        <div class="carousel-container">
                            <button class="carousel-arrow carousel-prev">
                                <i class="fas fa-angle-left"></i>
                            </button>
                            <button class="carousel-arrow carousel-next">
                                <i class="fas fa-angle-right"></i>
                            </button>
                            <div class="carousel-slides">
                                <div class="carousel-slide active">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09180.JPG') }}" alt="Product 5">
                                </div>
                                <!-- Additional product images -->
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09183.JPG') }}" alt="Product 5 - View 2">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09190.JPG') }}" alt="Product 5 - View 3">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09195.JPG') }}" alt="Product 5 - View 4">
                                </div>
                            </div>
                            <div class="carousel-dots">
                                <span class="dot active" data-index="0"></span>
                                <span class="dot" data-index="1"></span>
                                <span class="dot" data-index="2"></span>
                                <span class="dot" data-index="3"></span>
                            </div>
                        </div>
                    </div>
                    <h3>Certified Trucker - White</h3>
                    <p class="price">$60</p>
                    {% if products and products|length > 4 and products[4].stock > 0 %}
                        <button class="add-to-cart" data-product-id="5">
                            Add to Cart
                        </button>
                    {% else %}
                        <button class="add-to-cart sold-out" disabled>
                            Sold Out
                        </button>
                    {% endif %}
                </div>
                
                <!-- Sixth Product (placeholder) -->
                <div class="product-card">
                    <div class="product-image-carousel">
                        <div class="carousel-container">
                            <button class="carousel-arrow carousel-prev">
                                <i class="fas fa-angle-left"></i>
                            </button>
                            <button class="carousel-arrow carousel-next">
                                <i class="fas fa-angle-right"></i>
                            </button>
                            <div class="carousel-slides">
                                <div class="carousel-slide active">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09135.jpg') }}" alt="Product 6">
                                </div>
                                <!-- Additional product images -->
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09136.jpg') }}" alt="Product 6 - View 2">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09139.JPG') }}" alt="Product 6 - View 3">
                                </div>
                                <div class="carousel-slide">
                                    <img src="{{ url_for('static', filename='images/hats/DSC09147.jpg') }}" alt="Product 6 - View 4">
                                </div>
                            </div>
                            <div class="carousel-dots">
                                <span class="dot active" data-index="0"></span>
                                <span class="dot" data-index="1"></span>
                                <span class="dot" data-index="2"></span>
                                <span class="dot" data-index="3"></span>
                            </div>
                        </div>
                    </div>
                    <h3>Certified Trucker - Black</h3>
                    <p class="price">$60</p>
                    {% if products and products|length > 5 and products[5].stock > 0 %}
                        <button class="add-to-cart" data-product-id="6">
                            Add to Cart
                        </button>
                    {% else %}
                        <button class="add-to-cart sold-out" disabled>
                            Sold Out
                        </button>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- Live Sets Section -->
    <section id="livesets" class="tracks-container">
        <div class="featured-track">
            <h2 class="drop-title">Live Sets</h2>
            


            <!-- SoundCloud Embeds -->
            <div class="track-player-embed">
                <div class="soundcloud-player">
                    <iframe width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1825112544&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/jack-trax-412772982" title="Traxler" target="_blank" style="color: #cccccc; text-decoration: none;">Traxler</a> · <a href="https://soundcloud.com/jack-trax-412772982/delus-presents-traxler" title="Delüs Feature: Traxler" target="_blank" style="color: #cccccc; text-decoration: none;">Delüs Feature: Traxler</a></div>
            </div>

            <div class="track-player-embed">
                <div class="soundcloud-player">
<iframe width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/2066889504&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/jack-trax-412772982" title="Traxler" target="_blank" style="color: #cccccc; text-decoration: none;">Traxler</a> · <a href="https://soundcloud.com/jack-trax-412772982/rockbar-329-traxler" title="RockBar 3/29/25 - Delus Scottsdale X Top Secret" target="_blank" style="color: #cccccc; text-decoration: none;">RockBar 3/29/25 - Delus Scottsdale X Top Secret</a></div>                </div>

        </div>
        <div class="track-player-embed">
            <div class="soundcloud-player">
                <iframe width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/2090066292&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/kda2478" title="Ched" target="_blank" style="color: #cccccc; text-decoration: none;">Ched</a> · <a href="https://soundcloud.com/kda2478/a-desert-ritual-rockbar-5-3" title="A Desert Ritual - Rockbar 5.3" target="_blank" style="color: #cccccc; text-decoration: none;">A Desert Ritual - Rockbar 5.3</a></div>
    </div>
    </section>

    <!-- Minimal Cart Popup -->
    <div id="cart-popup" class="cart-popup">
        <div class="popup-content">
            <div class="popup-header">
                <i class="fas fa-check-circle"></i>
                <span>Added to Cart</span>
            </div>
            <div class="popup-body">
                <img id="popup-product-image" src="" alt="Product">
                <div class="popup-details">
                    <h4 id="popup-product-name"></h4>
                    <p class="price" id="popup-product-price"></p>
                    <div class="cart-summary">
                        <span class="cart-count">Cart: <strong id="popup-cart-total">0</strong> items</span>
                    </div>
                </div>
            </div>
            <div class="popup-actions">
                <button id="continue-shopping" class="continue-btn">Continue Shopping</button>
                <a href="/cart" class="view-cart-btn">View Cart (<span id="popup-cart-total-2">0</span>)</a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Shop</h3>
                <ul>
                    <li><a href="#featured">Collections</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Help</h3>
                <ul>
                    <li><a href="{{ url_for('shipping') }}">Shipping</a></li>
                    <li><a href="{{ url_for('returns') }}">Returns</a></li>
                    <li><a href="{{ url_for('contact') }}">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Connect</h3>
                <div class="social-links">
                    <a href="https://www.instagram.com/delus.co/?hl=en"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Delus. All rights reserved.</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/music.js') }}"></script>
    <script src="{{ url_for('static', filename='js/smooth-scroll.js') }}"></script>
    <script>
        // Simple popup functions
        function showCartPopup(productData, cartTotal) {
            const popup = document.getElementById('cart-popup');
            const productImage = document.getElementById('popup-product-image');
            const productName = document.getElementById('popup-product-name');
            const productPrice = document.getElementById('popup-product-price');
            const cartTotalSpan = document.getElementById('popup-cart-total');
            const cartTotalSpan2 = document.getElementById('popup-cart-total-2');
            
            // Set product data
            productImage.src = `/static/${productData.image_url}`;
            productName.textContent = productData.name;
            productPrice.textContent = `$${productData.price}`;
            cartTotalSpan.textContent = cartTotal;
            cartTotalSpan2.textContent = cartTotal;
            
            // Show popup
            popup.style.display = 'flex';
            setTimeout(() => {
                popup.classList.add('show');
            }, 10);
            
            // Auto-hide after 3 seconds
            setTimeout(() => {
                hideCartPopup();
            }, 3000);
        }
        
        function hideCartPopup() {
            const popup = document.getElementById('cart-popup');
            popup.classList.remove('show');
            setTimeout(() => {
                popup.style.display = 'none';
            }, 300);
        }

        // Cart functionality
        document.addEventListener('DOMContentLoaded', function() {
            const addToCartButtons = document.querySelectorAll('.add-to-cart');
            
            // Setup continue shopping button
            document.getElementById('continue-shopping').addEventListener('click', hideCartPopup);
            
            // Update button content to add shimmer effect
            addToCartButtons.forEach(button => {
                // Preserve original content but wrap text in a span
                const originalHTML = button.innerHTML;
                button.innerHTML = originalHTML;
                
                // Add sparkle particles
                for (let i = 0; i < 5; i++) {
                    const sparkle = document.createElement('span');
                    sparkle.classList.add('sparkle');
                    button.appendChild(sparkle);
                }
                
                // Add shimmer effect on hover
                button.addEventListener('mouseenter', function() {
                    // Animate sparkles
                    const sparkles = this.querySelectorAll('.sparkle');
                    sparkles.forEach((sparkle, index) => {
                        // Random position within button
                        const x = Math.random() * 100;
                        const y = Math.random() * 100;
                        
                        // Set initial position
                        sparkle.style.left = x + '%';
                        sparkle.style.top = y + '%';
                        
                        // Animate with delay based on index
                        setTimeout(() => {
                            sparkle.style.opacity = '1';
                            sparkle.style.transform = 'scale(1.5)';
                            sparkle.style.transition = 'all 0.6s ease';
                            
                            // Fade out after animation
                            setTimeout(() => {
                                sparkle.style.opacity = '0';
                                sparkle.style.transform = 'scale(0)';
                            }, 400);
                        }, index * 100);
                    });
                });
                
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-product-id');
                    
                    // Disable button temporarily
                    this.disabled = true;
                    this.style.opacity = '0.7';
                    
                    fetch(`/add-to-cart/${productId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: 'quantity=1'
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            // Update cart counter
                            document.getElementById('cart-counter').textContent = data.cart_total;
                            
                            // Create a purple flash effect when added to cart
                            const button = this;
                            button.style.backgroundColor = 'rgba(100, 20, 150, 0.9)';
                            button.style.boxShadow = '0 0 20px rgba(100, 20, 150, 0.5)';
                            
                            setTimeout(() => {
                                button.style.backgroundColor = '';
                                button.style.boxShadow = '';
                            }, 500);
                            
                            // Show custom popup instead of generic alert
                            showCartPopup(data.product, data.cart_total);
                        } else {
                            // Handle errors (like out of stock)
                            alert(data.error || 'Error adding to cart');
                        }
                        
                        // Re-enable button
                        this.disabled = false;
                        this.style.opacity = '1';
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error adding to cart');
                        // Re-enable button
                        this.disabled = false;
                        this.style.opacity = '1';
                    });
                });
            });
            
            // Image carousel functionality
            const carousels = document.querySelectorAll('.carousel-container');
            
            carousels.forEach(carousel => {
                const slides = carousel.querySelectorAll('.carousel-slide');
                const dots = carousel.querySelectorAll('.dot');
                const prevBtn = carousel.querySelector('.carousel-prev');
                const nextBtn = carousel.querySelector('.carousel-next');
                let currentIndex = 0;
                
                // Touch variables
                let touchStartX = 0;
                let touchEndX = 0;
                
                // Function to show a specific slide
                function showSlide(index) {
                    // Hide all slides and remove active class from dots
                    slides.forEach(slide => slide.classList.remove('active'));
                    dots.forEach(dot => dot.classList.remove('active'));
                    
                    // Show the current slide and add active class to current dot
                    slides[index].classList.add('active');
                    dots[index].classList.add('active');
                    
                    currentIndex = index;
                }
                
                // Next slide function
                function nextSlide() {
                    currentIndex = (currentIndex + 1) % slides.length;
                    showSlide(currentIndex);
                }
                
                // Previous slide function
                function prevSlide() {
                    currentIndex = (currentIndex - 1 + slides.length) % slides.length;
                    showSlide(currentIndex);
                }
                
                // Add event listeners to dots
                dots.forEach((dot, index) => {
                    dot.addEventListener('click', () => showSlide(index));
                });
                
                // Add event listeners to navigation buttons
                if (prevBtn) prevBtn.addEventListener('click', prevSlide);
                if (nextBtn) nextBtn.addEventListener('click', nextSlide);
                
                // Touch event handlers for mobile swipe
                carousel.addEventListener('touchstart', function(e) {
                    touchStartX = e.changedTouches[0].screenX;
                }, {passive: true});
                
                carousel.addEventListener('touchend', function(e) {
                    touchEndX = e.changedTouches[0].screenX;
                    handleSwipe();
                }, {passive: true});
                
                function handleSwipe() {
                    // Detect direction of swipe
                    if (touchEndX < touchStartX - 50) {
                        // Swipe left - next slide
                        nextSlide();
                    } else if (touchEndX > touchStartX + 50) {
                        // Swipe right - previous slide
                        prevSlide();
                    }
                }
                
                // Click on image to go to next slide
                carousel.addEventListener('click', function(e) {
                    // Only proceed if we clicked on the image, not the dots or arrows
                    if (!e.target.closest('.carousel-dots') && 
                        !e.target.closest('.carousel-arrow')) {
                        nextSlide();
                    }
                });
                
                // Show first slide initially
                showSlide(0);
            });
        });
    </script>
</body>
</html>
